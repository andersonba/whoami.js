var whoami=function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=n(1),u=o(c),l=n(2),d=o(l),h=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o=arguments[1];i(this,t),"function"==typeof n&&(o=n,n={});var r=n,c=r.api,u=void 0===c?null:c,l=r.customData,d=void 0===l?null:l,h=r.filters,f=void 0===h?{}:h,p=r.clipboard,v=void 0===p?!1:p,y=r.shortcut,g=void 0===y?!0:y,b={basic:!0,customData:!0,screenshot:!0,tasks:!1},m={log:!0,error:!0,debug:!0,info:!0,warn:!0};this.loggers={exception:[],console:[]},this.output={},this.api=u,this.clipboard=!!v,this.customData=d,this.shortcut=g,this.callback=o,this.filters=a(b,f),this.enabledFilters=Object.keys(this.filters).filter(function(t){return e.filters[t]});var _=this.filters.console;_!==!1&&(_="object"===("undefined"==typeof _?"undefined":s(_))?_:{},this.filters.console=a(m,_)),this.execute=this.execute.bind(this),this._runCatches=this._runCatches.bind(this),this._bindException=this._bindException.bind(this),this._bindConsole=this._bindConsole.bind(this),this._init()}return r(t,[{key:"_init",value:function(){this.shortcut&&this._bindShortcut(),this.enabledFilters.indexOf("exception")>=0&&this._bindException(),this.enabledFilters.indexOf("console")>=0&&this._bindConsole()}},{key:"execute",value:function(){var t=this;this.output={},this._showLoading(),d["default"].loadScript(u["default"].html2canvasUrl,function(){t._runCatches(function(){var e=function(e){return t.api?t._sendAjax(e):void e()};e(function(){t.clipboard&&t._copyClipboard(),t.callback&&t.callback(t.output),t._hideLoading()})})})}},{key:"_showLoading",value:function(){console.log("Loading: start")}},{key:"_hideLoading",value:function(){console.log("Loading: done")}},{key:"_copyClipboard",value:function(){prompt(u["default"].clipboardMessage,JSON.stringify(this.output))}},{key:"_sendAjax",value:function(t){var e=JSON.stringify(this.output);d["default"].postRequest(this.api,e,function(e,n){e?alert(u["default"].submitErrorMessage):alert(n?u["default"].sentSuccessCodeMessage+' "'+n+'".':u["default"].sentSuccessMessage),t()})}},{key:"_runCatches",value:function(t){var e=this,n=0,o=this.enabledFilters;o.map(function(i){var s="catch"+i.charAt(0).toUpperCase()+i.slice(1);e[s]&&"function"==typeof e[s]&&e[s](function(){n++,o.length===n&&t()})})}},{key:"_bindException",value:function(){window.onerror=function(t,e,n,o){this.loggers.exception.push({time:+new Date,message:t,url:e,line:n,col:o})}.bind(this)}},{key:"_bindConsole",value:function(){var t=this,e=Object.keys(this.filters.console).filter(function(e){return t.filters.console[e]});e.map(function(e){d["default"].patchFunction(window.console,e,function(){this.loggers.console.push({time:+new Date,message:Array.prototype.slice.call(arguments).join(" ")})}.bind(t))})}},{key:"_bindShortcut",value:function(){var t=this;document.addEventListener("keydown",function(e){var n=!!e[u["default"].shortcutModifier+"Key"],o=String.fromCharCode(e.which)===u["default"].shortcutKey;n&&o&&t.execute()})}},{key:"_addReport",value:function(t,e){var n=this.output[t];n&&(n=d["default"].isArray(n)?n:[n],n.push(e)),this.output[t]=n||e}},{key:"catchBasic",value:function(t){this._addReport("basic",{title:document.title,url:window.location.href,origin:window.location.origin,userAgent:navigator.userAgent,resolution:screen.width+"x"+screen.height,time:+new Date}),t()}},{key:"catchCustomData",value:function(t){this.customData&&this._addReport("customData",this.customData),t()}},{key:"catchCookie",value:function(t){this._addReport("cookie",d["default"].getCookies()),t()}},{key:"catchLocalStorage",value:function(t){this._addReport("localStorage",a({},localStorage)),t()}},{key:"catchException",value:function(t){this._addReport("exception",this.loggers.exception),t()}},{key:"catchConsole",value:function(t){this._addReport("console",this.loggers.console),t()}},{key:"catchScreenshot",value:function(t){var e=this;window.html2canvas(document.body,{onrendered:function(n){e._addReport("screenshot",n.toDataURL()),t()}})}},{key:"catchDescription",value:function(t){var e=prompt(u["default"].descriptionDialogMessage);this._addReport("description",e),t()}},{key:"catchTasks",value:function(t){function e(){i>=Object.keys(o).length&&(n._addReport("tasks",s),t())}var n=this,o=this.filters.tasks||{},i=0,s={},a=function(t){c=o[t](function(n){s[t]=n,i++,e()}),c&&(s[t]=c,i++,e())};for(var r in o){var c;a(r)}}}]),t}();window.__whoami={loadedScripts:[]},t.exports=h},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={clipboardMessage:"Copy this text using Ctrl+C and send for us. Thanks!",sentSuccessMessage:"We will contact you, soon. Thanks!",sentSuccessCodeMessage:"Thanks! Your ticket code is",submitErrorMessage:"Ops... Failed to submit data, try again or contact us.",descriptionDialogMessage:"Please describe the issue you are experiencing (optional)",shortcutModifier:"ctrl",shortcutKey:"0",html2canvasUrl:"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},postRequest:function(t,e,n){var o=new window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e=JSON.stringify(e),o.open("POST",encodeURI(t),!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onload=function(){if(4===o.readyState&&200===o.status){var t=void 0;try{t=(JSON.parse(o.responseText)||{}).code}catch(e){}return n(null,t)}n(new Error(o.statusText))},o.send(e)},getCookies:function(){for(var t={},e=document.cookie.split(";"),n=0,o=e.length;o>n;n++){var i=e[n].trim().split("=");t[i[0]]=unescape(i[1])}return t},patchFunction:function(t,e,n){if(t[e]&&"function"==typeof t[e]){var o=t[e];return t[e]=function(){o.apply(t,arguments),n.apply(t,arguments)},t}},loadScript:function(t,e){if(window.__whoami.loadedScripts.indexOf(t)>=0)return e();var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.addEventListener("load",e,!1);var o=document.getElementsByTagName("head")[0];o.appendChild(n),window.__whoami.loadedScripts.push(t)}}}]);